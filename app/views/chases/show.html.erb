<div class="chase-show-container">
  <div class="chase-main">
    <div class="chase-header-show">
      <div class="user-info-show">
        <% if @chase.user %>
          <%= link_to user_path(@chase.user), class: "user-link-show" do %>
            <strong><%= @chase.user.name || @chase.user.email %></strong>
          <% end %>
        <% end %>
        <span class="created-at-show"><%= @chase.created_at.strftime("%YÂπ¥%mÊúà%dÊó• %H:%M") %></span>
      </div>
      
      <% if user_signed_in? && @chase.user == current_user %>
        <div class="chase-actions-show">
          <%= link_to "Á∑®ÈõÜ", edit_chase_path(@chase), class: "edit-link" %>
          <%= button_to "ÂâäÈô§", chase_path(@chase), method: :delete, 
              class: "delete-btn", 
              data: { confirm: "Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü" } %>
        </div>
      <% end %>
    </div>

    <div class="chase-question-show">
      <h2>Ë≥™Âïè</h2>
      <p><%= simple_format(@chase.body) %></p>
    </div>

    <div class="chase-stats-show">
      <div class="stat-item-show">
        <span class="stat-label-show">„ÅÑ„ÅÑ„Å≠:</span>
        <span class="stat-value-show"><%= @chase.likes.count %></span>
      </div>
      <div class="stat-item-show">
        <span class="stat-label-show">„Ç≥„É°„É≥„Éà:</span>
        <span class="stat-value-show"><%= @chase.comments.count %></span>
      </div>
    </div>

    <div class="like-section">
      <% if user_signed_in? %>
        <% if current_user.likes.exists?(chase_id: @chase.id) %>
          <%= button_to "‚ù§Ô∏è „ÅÑ„ÅÑ„Å≠Ëß£Èô§", chase_like_path(@chase), method: :delete, class: "like-btn-show liked" %>
        <% else %>
          <%= button_to "ü§ç „ÅÑ„ÅÑ„Å≠", chase_like_path(@chase), method: :post, class: "like-btn-show" %>
        <% end %>
      <% else %>
        <p class="login-prompt">„ÅÑ„ÅÑ„Å≠„Åô„Çã„Å´„ÅØ<%= link_to "„É≠„Ç∞„Ç§„É≥", new_user_session_path %>„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
      <% end %>
    </div>

    <div class="poker-table-show">
      <div class="jj">
        <div class="ai">
          <div class="field1">
            <b>SB</b>
            <%= @chase.ace %>
          </div>

          <div class="field3">
            <b>BB</b>
            <%= @chase.five %>
          </div>

          <div class="field4">
            <b>UTG</b>
            <%= @chase.four %>
          </div>
        </div>
        
        <div class="bi">
          <div class="field2">
            <b>BTN</b>
            <%= @chase.king %>
          </div>

          <div class="field8d">
            <div class="kk">
              <div class="field15">
                <b>„Ç´„Éº„Éâ1</b>
                <%= @chase.aa %>
              </div>
              
              <div class="field15">
                <b>„Ç´„Éº„Éâ2</b>
                <%= @chase.bb %>
              </div>

              <div class="field15">
                <b>„Ç´„Éº„Éâ3</b>
                <%= @chase.cc %>
              </div>

              <div class="field15">
                <b>„Ç´„Éº„Éâ4</b>
                <%= @chase.dd %>
              </div>

              <div class="field15">
                <b>„Ç´„Éº„Éâ5</b>
                <%= @chase.ee %>
              </div>
            </div>

            <div class="k893">
              <b>„Éù„ÉÉ„ÉàÈ°çBB</b>
              <%= @chase.queen %>
            </div>
          </div>

          <div class="field5">
            <b>LJ</b>
            <%= @chase.three %>
          </div>
        </div>

        <div class="ci">
          <div class="field6">
            <b>HJ</b>
            <%= @chase.two %>
          </div>

          <div class="field7">
            <b>CO</b>
            <%= @chase.one %>
          </div>
        </div>
      </div>

      <div class="ki">
        <div class="field12">
          <b>„Ç¢„É≥„ÉÜ„Ç£</b>
          <%= @chase.six %>
        </div>

        <div class="field13">
          <b>SB</b>
          <%= @chase.jack %>
        </div>

        <div class="field14">
          <b>Blind</b>
          <%= @chase.ten %>
        </div>

        <div class="field9">
          <b>BET</b>
          <%= @chase.nine %>
        </div>

        <div class="field10">
          <b>RAISE</b>
          <%= @chase.eight %>
        </div>
      </div>
    </div>
  </div>

  <div class="comments-section">
    <h3>„Ç≥„É°„É≥„Éà‰∏ÄË¶ß (<%= @comments.count %>)</h3>
    
    <% if @comments.any? %>
      <div class="comments-list">
        <% @comments.each do |comment| %>
          <div class="comment-item">
            <div class="comment-header">
              <% if comment.user %>
                <strong class="comment-user"><%= comment.user.name || comment.user.email %></strong>
                <span class="comment-time"><%= time_ago_in_words(comment.created_at) %>Ââç</span>
              <% end %>
            </div>
            <div class="comment-content">
              <%= simple_format(comment.content) %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="no-comments">„Åæ„Å†„Ç≥„É°„É≥„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
    <% end %>

    <% if user_signed_in? %>
      <div class="comment-form-container">
        <h4>„Ç≥„É°„É≥„Éà„ÇíÊäïÁ®ø</h4>
        <%= form_with(model: [@chase, @comment], local: true, class: "comment-form") do |f| %>
          <%= f.text_area :content, placeholder: "„Ç≥„É°„É≥„Éà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ", rows: 4, class: "comment-textarea" %>
          <%= f.submit "„Ç≥„É°„É≥„Éà„Åô„Çã", class: "comment-submit-btn" %>
        <% end %>
      </div>
    <% else %>
      <p class="login-prompt">„Ç≥„É°„É≥„Éà„Åô„Çã„Å´„ÅØ<%= link_to "„É≠„Ç∞„Ç§„É≥", new_user_session_path %>„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
    <% end %>
  </div>

  <div class="back-link-container">
    <%= link_to "‚Üê ‰∏ÄË¶ß„Å´Êàª„Çã", chases_path, class: "back-link" %>
  </div>
</div>
